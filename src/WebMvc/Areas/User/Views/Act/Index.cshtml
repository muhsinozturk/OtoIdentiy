@model List<Application.DTOs.Act.ActDto>



<div class="container-fluid px-4 mt-4">

    <!-- Başlık -->
    <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
        <h3 class="fw-bold text-dark mb-0">
            <i class="bi bi-people-fill text-primary me-2"></i> Müşteri Yönetimi
        </h3>
        <a asp-action="Create" class="btn btn-primary shadow-sm px-3">
            <i class="bi bi-plus-circle me-1"></i> Yeni Müşteri
        </a>
    </div>

    <!-- Kart -->
    <div class="card border-0 shadow-sm">
        <div class="card-body p-0">
            <table class="table table-bordered table-hover align-middle table-sm mb-0 text-center">
                <thead class="table-light border-bottom">
                    <tr class="text-secondary fw-semibold">
                        <th>Ad Soyad</th>
                        <th>TC No</th>
                        <th>Şirket</th>
                        <th class="text-center">İşlemler</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="customer-row">
                            <td class="fw-semibold">@item.FullName</td>
                            <td>@item.TcNo</td>
                            <td>@item.CompanyName</td>
                            <td class="text-center">
                                <div class="d-inline-flex gap-1">
                                    <button type="button" class="btn btn-outline-secondary " title="Detay" onclick="loadDetails(@item.Id)">
                                        <i class="bi bi-eye">Araçlar</i>
                                    </button>
                                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-outline-warning btn-sm" title="Düzenle">
                                        <i class="bi bi-pencil">Düzenle</i>
                                    </a>
                                    <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-outline-danger btn-sm" title="Sil">
                                        <i class="bi bi-trash">Sil</i>
                                    </a>
                                </div>
                            </td>
                        </tr>

                        <!-- Detay satırı -->
                        <tr id="detailsRow_@item.Id" class="details-row" style="display:none;">
                            <td colspan="4" id="detailsContainer_@item.Id"></td>
                        </tr>
                    }

             
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function loadDetails(id) {
            var row = $("#detailsRow_" + id);
            var container = $("#detailsContainer_" + id);

            if (row.is(":visible")) {
                row.hide();
            } else {
                $.get("/User/Act/DetailsPartial/" + id, function (data) {
                    container.html(data);
                    row.show();
                });
            }
        }
    </script>
}
